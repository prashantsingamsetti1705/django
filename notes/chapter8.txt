CHAPTER-8:Session Management
---------------------------------------------------
-->Client and Server can communicate with some common language which is nothing but HTTP.
-->The basic limitation of HTTP is it is a stateless protocol. i.e it is unable to remember client information for future purpose across multiple requests. Every request to the server is treated as new request only.
-->To remember client information at server side, some special mechanism must be required which is nothing but session management mechanism.

Different session management mechanisms are:
					1).Cookies
					2).Session API

Session management by using Cookies:
------------------------------------------------------------
-->Cookies is a very small amunt of information created by server and maintained by client. Cookies are key-value pairs.
		RMP Doctor example

To add cookies to the response:
	response.set_cookie(cname,value)

To get cookies send by client:
	request.COOKIES[cname]
	request.COOKIES.get(cname)
	request.COOKIES.get(cname,defaultvalue)

Ex:Page Count Application
-----------------------------------------
django-admin startproject pagecountproject
py manage.py startapp testapp
Add app in settings.py

views.py
-------------
def page_count_view(request):
    print('Cookies from the client:',request.COOKIES)
    count = int(request.COOKIES.get('count',0))
    count += 1
    response =  render(request,'testapp/counter.html',{'count':count})
    response.set_cookie('count',count)
    return response

counter.html
--------------------
<body>
    <h1>The Page Count:<span>{{count}}</span></h1>
</body>

Client is sending the first request:
---------------------------------------------------
-->What information required for future purpose, server will decide, with that information, server will create cookie and it should be handover to the client. Response will be send to client.
-->Server will add cookie to the response then automatically cookie will be reached to the client.

sessionproject2:
------------------------
django-admin startproject sessionproject2
py manage.py startapp testapp
Add app in settings.py

forms.py
-------------
from django import forms
class LoginForm(forms.Form):
    name = forms.CharField()

views.py
------------
from testapp.forms import LoginForm
def home_view(request):
    form = LoginForm()
    return render(request,'testapp/home.html',{'form':form})

home.html
-----------------
<body>
    <h1>Welcome To Naresh IT</h1>
    <form action="" >
        {{form.as_p}}
        {% csrf_token %}
        <input type="submit" value="Enter Name">
    </form>
</body>

urls.py:
	path('home/',views.home_view)

views.py
-------------
def date_time_view(request):
    name = request.GET['name']
    respnse = render(request,'testapp/datetime.html',{'name':name})
    respnse.set_cookie('name',name)
    return respnse

datetime.html
----------------------
<body>
  <h1>Hello {{name}}</h1>
  <a href="#">Click Here To Get The Date & Time</a>
</body>

urls.py:
	path('second/',views.date_time_view)

home.html
-----------------
<form action="/second" >


2/5/25(Session Management)
Mahesh Python
â€¢
Yesterday

django.txt
Text
Class comments
views.py
------------
import datetime
def result_view(request):
    name = request.COOKIES.get('name')
    date = datetime.datetime.now()
    return render(request,'testapp/results.html',{'name':name,'date':date})

results.html
------------------
<body>
  <h1>Hello {{name}}</h1>
  <h1>Current Date and Time:{{date}}</h1>
  <a href="/results">Click here to updated time</a>
</body>

urls.py:
	path('results/',views.result_view)

datetime.html, results.html
-------------------------------------------
<a href="/results">Click Here To Get The Date & Time</a>
<a href="/results">Click here to updated time</a>

sessionproject3
==============
django-admin startproject sessionproject3
py manage.py startapp testapp
Add ap in setings.py

views.py
-------------
def home_view(request):
    return render(request,'testapp/home.html')

home.html
-----------------
<body>
  <h1>Welcome To NARESH IT</h1>
  <form action="">
    Enter Name:<input type="text" name="name"><br><br>
      <input type="submit" value="Submit Name">
  </form>
</body>

urls.py:
	path('home/',views.home_view)

views.py
-------------
def age_view(request):
    print(request.COOKIES)
    name = request.GET['name']
    response = render(request,'testapp/age.html',{'name':name})
    response.set_cookie('name',name)
    return response

age.html
-------------
<body>
    <h1>Hello {{name}}</h1>
    <form action="">
    Enter Age:<input type="text" name="age"><br><br>
    <input type="submit" value="Submit Age">
    </form>
</body>

urls.py:
	path('age/',views.age_view)

views.py
-------------
def gf_view(request):
    print(request.COOKIES)
    name = request.COOKIES['name']
    age = request.GET['age']
    response = render(request,'testapp/gf.html',{'name':name})
    response.set_cookie('age',age)
    return response

gf.html
-----------
<body>
  <h1>Hello {{name}}</h1>
    <form action="">
    Enter GF Name:<input type="text" name="gf"><br><br>
    <input type="submit" value="Submit GF Name">
    </form>
</body>

urls.py:
	path('gf/',views.gf_view)

views.py
-------------
def result_view(request):
    print(request.COOKIES)
    name = request.COOKIES['name']
    age = request.COOKIES['age']
    gf = request.GET['gf']
    return render(request,'testapp/results.html',{'name':name,'age':age,'gf':gf})

results.html
-------------------
<body>
    <h1>Hello {{name}}, Thanks for providing information</h1>
    <h2>Please cross check your data and confirm</h2>
    <ul>
        <li>Name:{{name}}</li>
        <li>Age:{{age}}</li>
        <li>GF Name:{{gf}}</li>
    </ul>
</body>

urls.py:
	path('results/',views.result_view)